title: 正向代理与反向代理
date: 2016-04-05 10:57
tags: [网络知识,反向代理,正向代理,透明代理]
categories: 网络知识
---

## 正向代理

### 使用正向代理的主要原因

1. 访问本无法访问的服务器

    代理服务器代替用户通过其他路由器节点进行访问服务器，从而得到服务器的数据。
    例如翻墙，翻墙除了正向代理，还使用了VPN技术。

<!-- more -->

1. 加速访问服务器

    现在带宽流量的飞速发展，这个原因很少了。早期的正向代理中，很多人使用这个就是为了提速。

1. 缓存作用

1. 客户端授权

    采用正向代理服务器来授权用户是否有权限访问互联网。

1. 隐藏访问者的行踪

    代替服务器替用户访问服务器，服务器并不知道真正访问它的是用户。

我们总结一下 正向代理是一个位于客户端和原始服务器(`origin server`)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端必须设置正向代理服务器，当然前提是要知道正向代理服务器的IP地址，还有代理程序的端口。

## 反向代理

在计算机网络中，反向代理是代理服务器的一种。它根据客户端的请求，从后端的服务器上获取资源，然后再将这些资源返回给客户端。与前向代理不同，**前向代理作为一个媒介将互联网上获取的资源返回给相关联的客户端，而反向代理是在服务器端作为代理使用，而不是客户端。**

**反向代理正好与正向代理相反，对于客户端而言代理服务器就像是原始服务器，并且客户端不需要进行任何特别的设置。客户端向反向代理的命名空间(`name-space`)中的内容发送普通请求，接着反向代理将判断向何处(原始服务器)转交请求，并将获得的内容返回给客户端。**

反向代理的主要作用为：

- 加密和SSL加速
- 负载均衡
- 缓存静态内容
- 压缩
- 减速上传
- 安全
- 外网发布

保护和隐藏原始资源服务器与负载均衡。

## 透明代理

透明代理的意思是客户端根本不需要知道有代理服务器的存在，它改编你的`request fields`（报文），并会传送真实IP。注意，加密的透明代理则是属于匿名代理，意思是不用设置使用代理了。
透明代理实践的例子就是时下很多公司使用的行为管理软件。

![透明代理](http://thumbsnap.com/i/aKzz0mA8.png?0404)

用户A和用户B并不知道行为管理设备充当透明代理行为，当用户A或用户B向服务器A或服务器B提交请求的时候，透明代理设备根据自身策略拦截并修改用户A或B的报文，并作为实际的请求方，向服务器A或B发送请求，当接收信息回传，透明代理再根据自身的设置把允许的报文发回至用户A或B，如上图，如果透明代理设置不允许访问服务器B，那么用户A或者用户B就不会得到服务器B的数据。

参见：
[图解正向代理、反向代理、透明代理](http://z00w00.blog.51cto.com/515114/1031287)

